$schema: http://json-schema.org/draft-07/schema#
title: ResearchTask
description: ResearchTask represents a deep research task
type: object
properties:
  id:
    type: integer
    description: Unique identifier for the research task
  user_id:
    type: string
    description: Id of the user who owns the task
  query:
    type: string
    description: Original research query
  conversation_id:
    type: integer
    description: Id of the conversation associated with this task if any
  status:
    $ref: research_task_status.yaml
    description: Current status of the research task
  error_message:
    type: string
    description: Error message if task failed
  plan:
    type: string
    description: Research plan with sub-questions
  embedding:
    type: array
    items:
      type: number
    description: The reasearch plan's embedding vector
  subtasks:
    type: array
    items:
      $ref: research_subtask.yaml
    description: List of subtasks associated with this research task
  created_at:
    type: string
    format: date-time
    description: Timestamp of when the task was created
  updated_at:
    type: string
    format: date-time
    description: Timestamp of when the task was last updated
  completed_at:
    type: string
    format: date-time
    description: Timestamp of when the task was completed
required:
  - id
  - user_id
  - query
  - status
  - created_at
  - updated_at
